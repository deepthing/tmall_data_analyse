{% load i18n %}
<!DOCTYPE html> {% include 'nav.html' %}

<body>
    <div id="wrapper">
        <div class="overlay"></div>

        <!-- Sidebar -->
        <nav class="navbar navbar-inverse navbar-fixed-top" id="sidebar-wrapper" role="navigation">
            <ul class="nav sidebar-nav">
                <li class="sidebar-brand">
                    <a href="#">
                        {%trans "果瑞士"%}
                    </a>
                </li>
                <li>
                    <a href="#fee_amount">
                        <i class="fa fa-fw fa-file-o"></i> {%trans "出库金额分析"%}</a>
                </li>
                <li>
                    <a href="#fee_order">
                        <i class="fa fa-fw fa-file-o"></i> {%trans "仓储相关费用"%}</a>
                </li>
                <li>
                    <a href="#shipment">
                        <i class="fa fa-fw fa-file-o"></i> {%trans "各类市场费用"%}</a>
                </li>
                <li>
                    <a href="#fee_payment">
                        <i class="fa fa-fw fa-file-o"></i> {% trans "其他费用"%}</a>
                </li>

            </ul>
        </nav>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <button type="button" class="hamburger is-closed animated fadeInLeft" data-toggle="offcanvas">
                <span class="hamb-top"></span>
                <span class="hamb-middle"></span>
                <span class="hamb-bottom"></span>
            </button>

            <!-- container-->
            <div class="container">
                <div class="row">

                    <div class="panel panel-success" id="fee_amount">
                        <div class="panel-heading">
                            <h3>{%trans "出库金额分析"%}</h3>
                        </div>

                        <table data-toggle="table" data-pagination=true>
                            <thead>
                                <tr>
                                    <th data-align='center'>{%trans "月份"%}</th>
                                    <th data-align='center'>{%trans "期间出库金额"%}</th>
                                    <th data-align='center'>{%trans "菜鸟-税费"%}</th>
                                    <th data-align='center'>{%trans "菜鸟-服务费"%}</th>
                                    <th data-align='center'>{%trans "阿里费用"%}</th>
                                    <th data-align='center'>{%trans "天猫费用"%}</th>
                                    <th data-align='center'>{%trans "聚划算费用"%}</th>
                                    <th data-align='center'>{%trans "淘宝客费用"%}</th>
                                    <th data-align='center'>{%trans "期间退款金额"%}</th>
                                    <th data-align='center'>{%trans "提取金额"%}</th>

                                </tr>

                            </thead>
                            <tbody>
                                {% for index_delivery_fee_res in delivery_fee_res %}
                                <tr>
                                    <td>{{index_delivery_fee_res.month_str}}</td>
                                    <td>{%trans "¥"%}{{index_delivery_fee_res.sales_revenue}}</td>
                                    <td>{%trans "¥"%}{{index_delivery_fee_res.cross_border}}</td>
                                    <td>{%trans "¥"%}{{index_delivery_fee_res.logistic_service}}</td>
                                    <td>{%trans "¥"%}{{index_delivery_fee_res.alipay}}</td>
                                    <td>{%trans "¥"%}{{index_delivery_fee_res.tmall}}</td>
                                    <td>{%trans "¥"%}{{index_delivery_fee_res.great_deal}}</td>
                                    <td>{%trans "¥"%}{{index_delivery_fee_res.tmall_blogger}}</td>
                                    <td>{%trans "¥"%}{{index_delivery_fee_res.coustom_refunds}}</td>
                                    <td>{%trans "¥"%}{{index_delivery_fee_res.alipay_settlement}}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>


                    <div class="panel panel-success" id="fee_order">
                        <div class="panel-heading">
                            <h3>{%trans "仓储相关费用"%}</h3>
                        </div>

                        <table data-toggle="table" data-pagination=true id="stroage_table">
                            <thead>
                                <tr>
                                    <th data-align='center'>{%trans "月份"%}</th>
                                    <th data-align='center'>{%trans "菜鸟仓储费"%}</th>
                                    <th data-align='center' data-editable="true">{%trans "达缘仓储费用"%}</th>
                                    <th data-align='center' data-editable="true">{%trans "达缘打包人工费"%}</th>
                                    <th data-align='center' data-editable="true">{%trans "达缘包材费"%}</th>
                                    <th data-align='center'>{%trans "保险费"%} </th>
                                    <th data-align='center' data-editable="true">{%trans "菜鸟仓库库内操作费用（宁波仓贴标和海关）"%}</th>
                                    <th data-align='center' data-editable="true">{%trans "销毁人工费"%}</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for storage_fee_res_index in storage_fee_res %}
                                <tr>
                                    <td>{{storage_fee_res_index.trans_date}}</td>
                                    <td>{%trans "¥"%}{{storage_fee_res_index.a}}</td>
                                    <td>{%trans "¥"%}{{storage_fee_res_index.b}}</td>
                                    <td>{%trans "¥"%}{{storage_fee_res_index.c}}</td>
                                    <td>{%trans "¥"%}{{storage_fee_res_index.d}}</td>
                                    <td>{%trans "¥"%}{{storage_fee_res_index.e}}</td>
                                    <td>{%trans "¥"%}{{storage_fee_res_index.f}}</td>
                                    <td>{%trans "¥"%}{{storage_fee_res_index.g}}</td>

                                </tr>
                                {% endfor %}

                            </tbody>
                        </table>
                    </div>


                    <div class="panel panel-success" id="shipment">
                        <div class="panel-heading">
                            <h3>{%trans "各类市场费用"%}</h3>
                        </div>

                        <table data-toggle="table" data-pagination=true>
                            <thead>
                                <tr>
                                    <th data-align='center'>{%trans "月份"%}</th>
                                    <th data-align='center'>{%trans "商家赔付给消费者费用"%}</th>
                                    <th data-align='center'>{%trans "菜鸟赔付给商家费用（货款赔付）"%}</th>
                                    <th data-align='center'>{%trans "菜鸟赔付商给家费用（保证金赔付）"%}</th>
                                    <th data-align='center'>{%trans "推广补助"%}</th>
                                    <th data-align='center'>{%trans "其他账户返还"%}</th>
                                    <th data-align='center'>{%trans "天猫年费"%}</th>
                                    <th data-align='center'>{%trans "天猫广告推广费"%}</th>
                                </tr>

                            </thead>
                            <tbody>
                                {% for other_fee_res_index in other_fee_res %}
                                <tr>
                                    <td>{{other_fee_res_index.trans_date}}</td>
                                    <td>{%trans "¥"%}{{other_fee_res_index.a}}</td>
                                    <td>{%trans "¥"%}{{other_fee_res_index.b}}</td>
                                    <td>{%trans "¥"%}{{other_fee_res_index.c}}</td>
                                    <td>{%trans "¥"%}{{other_fee_res_index.d}}</td>
                                    <td>{%trans "¥"%}{{other_fee_res_index.e}}</td>
                                    <td>{%trans "¥"%}{{other_fee_res_index.f}}</td>
                                    <td>{%trans "¥"%}{{other_fee_res_index.g}}</td>
                                </tr>
                                {% endfor %}

                            </tbody>
                        </table>
                    </div>



                    <div class="panel panel-success" id="fee_payment">
                        <div class="panel-heading">
                            <h3>{%trans "其他费用"%}</h3>
                        </div>

                        <table data-toggle="table" data-pagination=true id="other_fee_table">
                            <thead>
                                <tr>
                                    <th data-align='center'>{%trans "月份"%}</th>
                                    <th data-align='center' data-editable="true">{%trans "提前支付给运营公司的市场费用"%}</th>
                                    <th data-align='center' data-editable="true">{%trans "返现金额和CRM"%}</th>
                                    <th data-align='center' data-editable="true">{%trans "天猫店铺软件费用"%}</th>
                                </tr>

                            </thead>
                            <tbody>
                                {% for index_fee_payment in fee_payment %}
                                <tr>
                                    <td>{{index_fee_payment.date_str}}</td>
                                    <td>{%trans "¥"%}{{index_fee_payment.marketing_fee}}</td>
                                    <td>{%trans "¥"%}{{index_fee_payment.crm}}</td>
                                    <td>{%trans "¥"%}{{index_fee_payment.tmall_software}}</td>
                                </tr>
                                {% endfor %}

                            </tbody>
                        </table>
                    </div>

                </div>

            </div>
            <!-- container end-->
        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->
</body>


<script type="text/javascript">
    $(document).ready(function () {
        var trigger = $('.hamburger'),
            overlay = $('.overlay'),
            isClosed = false;

        trigger.click(function () {
            hamburger_cross();
        });

        function hamburger_cross() {

            if (isClosed == true) {
                overlay.hide();
                trigger.removeClass('is-open');
                trigger.addClass('is-closed');
                isClosed = false;
            } else {
                overlay.show();
                trigger.removeClass('is-closed');
                trigger.addClass('is-open');
                isClosed = true;
            }
        }

        $('[data-toggle="offcanvas"]').click(function () {
            $('#wrapper').toggleClass('toggled');
        });

    });
</script>
<script>
    console.log("stroage_table");
    $('#stroage_table').bootstrapTable({
        onEditableSave: function (field, row, oldValue, $el) {
            console.log(row)
            $.ajax({
                type: "post",
                url: "/update_stroage_table/",
                data: row,
                dataType: 'JSON',
                Charset: "utf8",
                success: function (data) {
                    console.log(data)
                },
                error: function (data) {
                    console.log(data)
                },

            })
        }
    });
    console.log("stroage_table");
    $('#other_fee_table').bootstrapTable({
        onEditableSave: function (field,
            row, oldValue, $el) {
            console.log(row)
            $.ajax({
                type: "post",
                url: "/update_fee_table/",
                data: row,
                dataType: 'JSON',
                Charset: "utf8",
                success: function (data) {
                    console.log(data)
                },
                error: function (data) {
                    console.log(data)
                },
            })
        }
    })
</script>

</html>